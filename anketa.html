<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∫–µ—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—É–¥–µ–±–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞</title>
    <style>
        @font-face {
            font-family: 'Circe';
            src: local('Arial');
            font-weight: normal;
            font-style: normal;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Circe', Arial, sans-serif;
            background: #f5f5f5;
            color: #68311f;
            line-height: 1.6;
            padding: 20px 10px;
        }
        
        .container {
            max-width: 600px;
            margin: 0 auto;
            background: white;
            padding: 30px 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #f26649;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        h2 {
            color: #f26649;
            font-size: 20px;
            margin-bottom: 10px;
            margin-top: 20px;
        }
        
        .step-description {
            color: #68311f;
            margin-bottom: 25px;
            font-size: 15px;
        }
        
        .question-block {
            margin-bottom: 25px;
        }
        
        .question-label {
            display: block;
            color: #68311f;
            font-weight: 500;
            margin-bottom: 8px;
            font-size: 15px;
        }
        
        .question-hint {
            display: block;
            color: #c59368;
            font-size: 13px;
            margin-bottom: 10px;
        }
        
        input[type="text"],
        input[type="number"],
        select,
        textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
            font-size: 15px;
            color: #68311f;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus,
        select:focus,
        textarea:focus {
            outline: none;
            border-color: #f26649;
        }
        
        .radio-group,
        .checkbox-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .radio-option,
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        input[type="radio"],
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            border-radius: 50%;
            appearance: none;
            -webkit-appearance: none;
            border: 2px solid #ddd;
            position: relative;
        }
        
        input[type="radio"]:checked,
        input[type="checkbox"]:checked {
            border-color: #f26649;
            background: #f26649;
        }
        
        input[type="radio"]:checked::after,
        input[type="checkbox"]:checked::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
        }
        
        .radio-option label,
        .checkbox-option label {
            cursor: pointer;
            font-size: 15px;
        }
        
        .error-message {
            color: #c59368;
            font-size: 13px;
            margin-top: 5px;
            display: none;
        }
        
        .error-message.show {
            display: block;
        }
        
        .navigation {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: space-between;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-family: inherit;
            font-size: 16px;
            cursor: pointer;
            transition: opacity 0.2s;
        }
        
        .btn-back {
            background: #e0e0e0;
            color: #68311f;
        }
        
        .btn-back:hover:not(:disabled) {
            opacity: 0.8;
        }
        
        .btn-next,
        .btn-finish {
            background: #f26649;
            color: white;
            flex: 1;
        }
        
        .btn-next:hover:not(:disabled),
        .btn-finish:hover:not(:disabled) {
            opacity: 0.9;
        }
        
        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .step {
            display: none;
        }
        
        .step.active {
            display: block;
        }
        
        .hidden {
            display: none !important;
        }
        
        .info-block {
            background: #f9f9f9;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            border-left: 3px solid #f26649;
        }
        
        .info-block h3 {
            color: #f26649;
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .info-block p {
            color: #68311f;
            font-size: 14px;
        }
        
        .bank-block,
        .credit-block {
            background: #fafafa;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 15px;
            border: 1px solid #e0e0e0;
        }
        
        .bank-block h3 {
            color: #f26649;
            font-size: 16px;
            margin-bottom: 15px;
        }
        
        .credit-block h4 {
            color: #68311f;
            font-size: 15px;
            margin-bottom: 10px;
        }
        
        .final-screen {
            text-align: center;
            padding: 40px 20px;
        }
        
        .final-screen h1 {
            margin-bottom: 20px;
        }
        
        .final-screen p {
            font-size: 16px;
            line-height: 1.8;
        }
        
        .btn-test {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #c59368;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            font-size: 13px;
            cursor: pointer;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }
        
        .btn-test:hover {
            opacity: 0.9;
        }

        
        @media (max-width: 480px) {
            .container {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 20px;
            }
            
            h2 {
                font-size: 18px;
            }
            
            .navigation {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <button class="btn-test" onclick="fillTestData()">üß™ –¢–µ—Å—Ç</button>
    <div class="container">
        <div id="app"></div>
    </div>

    <script>
        const API_URL = 'https://mail-ru-6h10.onrender.com/api/submit';
        
        function fillTestData() {
            anketaData.answers = {
                step1_general: {
                    region: "–ú–æ—Å–∫–≤–∞",
                    fullName: "–¢–µ—Å—Ç–æ–≤ –¢–µ—Å—Ç –¢–µ—Å—Ç–æ–≤–∏—á",
                    wasBankrupt: false,
                    bankruptYear: null,
                    bankruptType: null
                },
                step2_family: {
                    isMarried: true,
                    wasMarriedLast3Years: null,
                    spouseTransactions: false,
                    spouseTransactionTypes: [],
                    spouseProperty: ["–ù–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–∞"]
                },
                step3_children: {
                    childrenCount: "2",
                    monthlyExpenses: 30000
                },
                step4_debts: {
                    totalDebt: 1500000,
                    nonDischargeable: "–ù–µ—Ç"
                },
                step5_banks: {
                    selectedBanks: ["–°–±–µ—Ä–±–∞–Ω–∫", "–í–¢–ë"],
                    otherBankName: ""
                },
                step6_bankCredits: {
                    "–°–±–µ—Ä–±–∞–Ω–∫": {
                        count: 2,
                        credits: [
                            { amount: 500000, monthsAgo: 24, paymentsCount: 20 },
                            { amount: 300000, monthsAgo: 12, paymentsCount: 10 }
                        ]
                    },
                    "–í–¢–ë": {
                        count: 1,
                        credits: [
                            { amount: 700000, monthsAgo: 36, paymentsCount: 30 }
                        ]
                    }
                },
                step7_mfo: {
                    mfoCount: 0,
                    mfoTotalDebt: null
                },
                step8_spending: {
                    purposes: ["–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (–ø–∏—Ç–∞–Ω–∏–µ, –æ–¥–µ–∂–¥–∞, –±—ã—Ç–æ–≤—ã–µ –Ω—É–∂–¥—ã)", "–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –¥–µ—Ç–µ–π"],
                    otherPurpose: "",
                    largePurchases: "–ù–µ—Ç",
                    propertyPurchased: "–ù–µ—Ç",
                    propertyType: null,
                    transfersToThirdParties: "–ù–µ—Ç"
                },
                step9_income: {
                    monthlyIncome: 80000,
                    hasOfficialJob: true,
                    hasSelfEmployment: false,
                    hasOtherIncome: false
                },
                step10_expensesAndBehavior: {
                    alimony: 0,
                    utilities: 5000,
                    rent: 0,
                    otherExpenses: 10000,
                    hasOverdue: true,
                    maxOverduePeriod: "–ë–æ–ª–µ–µ 90 –¥–Ω–µ–π",
                    requestedRestructuring: false,
                    restructuringWhen: null,
                    newCreditsAfterTrouble: "–ù–µ—Ç",
                    newCreditsWhen: null
                },
                step11_property: {
                    onlyHome: true,
                    propertyShares: false,
                    mortgageContracts: false,
                    collateralProperty: false,
                    financialAssets: false,
                    vehicles: true,
                    otherProperty: false
                },
                step12_legal: {
                    incapacityDecision: false,
                    criminalRecord: false
                }
            };
            
            currentStep = 12;
            renderCurrentStep();
            
            setTimeout(() => {
                finishAnketa();
            }, 500);
        }
        
        const anketaData = {
            meta: {
                schema_version: "1.0.0",
                created_at: new Date().toISOString(),
                completed_at: null,
                client_timezone: Intl.DateTimeFormat().resolvedOptions().timeZone,
                source: {
                    platform: "standalone",
                    page_url: window.location.href
                }
            },
            answers: {
                step1_general: {
                    region: "",
                    fullName: "",
                    wasBankrupt: null,
                    bankruptYear: null,
                    bankruptType: null
                },
                step2_family: {
                    isMarried: null,
                    wasMarriedLast3Years: null,
                    spouseTransactions: null,
                    spouseTransactionTypes: [],
                    spouseProperty: []
                },
                step3_children: {
                    childrenCount: "",
                    monthlyExpenses: null
                },
                step4_debts: {
                    totalDebt: null,
                    nonDischargeable: ""
                },
                step5_banks: {
                    selectedBanks: [],
                    otherBankName: ""
                },
                step6_bankCredits: {},
                step7_mfo: {
                    mfoCount: null,
                    mfoTotalDebt: null
                },
                step8_spending: {
                    purposes: [],
                    otherPurpose: "",
                    largePurchases: null,
                    propertyPurchased: null,
                    propertyType: null,
                    transfersToThirdParties: null
                },
                step9_income: {
                    monthlyIncome: null,
                    hasOfficialJob: null,
                    hasSelfEmployment: null,
                    hasOtherIncome: null
                },
                step10_expensesAndBehavior: {
                    alimony: null,
                    utilities: null,
                    rent: null,
                    otherExpenses: null,
                    hasOverdue: null,
                    maxOverduePeriod: null,
                    requestedRestructuring: null,
                    restructuringWhen: null,
                    newCreditsAfterTrouble: null,
                    newCreditsWhen: null
                },
                step11_property: {
                    onlyHome: null,
                    propertyShares: null,
                    mortgageContracts: null,
                    collateralProperty: null,
                    financialAssets: null,
                    vehicles: null,
                    otherProperty: null
                },
                step12_legal: {
                    incapacityDecision: null,
                    criminalRecord: null
                }
            }
        };

        let currentStep = 1;

        const regions = [
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–¥—ã–≥–µ—è", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ê–ª—Ç–∞–π", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë–∞—à–∫–æ—Ä—Ç–æ—Å—Ç–∞–Ω", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ë—É—Ä—è—Ç–∏—è",
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –î–∞–≥–µ—Å—Ç–∞–Ω", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ò–Ω–≥—É—à–µ—Ç–∏—è", "–ö–∞–±–∞—Ä–¥–∏–Ω–æ-–ë–∞–ª–∫–∞—Ä—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞–ª–º—ã–∫–∏—è", "–ö–∞—Ä–∞—á–∞–µ–≤–æ-–ß–µ—Ä–∫–µ—Å—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–∞—Ä–µ–ª–∏—è",
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö–æ–º–∏", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ö—Ä—ã–º", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–∞—Ä–∏–π –≠–ª", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –ú–æ—Ä–¥–æ–≤–∏—è",
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–∞—Ö–∞ (–Ø–∫—É—Ç–∏—è)", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –°–µ–≤–µ—Ä–Ω–∞—è –û—Å–µ—Ç–∏—è ‚Äî –ê–ª–∞–Ω–∏—è", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢–∞—Ç–∞—Ä—Å—Ç–∞–Ω",
            "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –¢—ã–≤–∞", "–£–¥–º—É—Ä—Ç—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–†–µ—Å–ø—É–±–ª–∏–∫–∞ –•–∞–∫–∞—Å–∏—è", "–ß–µ—á–µ–Ω—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞",
            "–ß—É–≤–∞—à—Å–∫–∞—è –†–µ—Å–ø—É–±–ª–∏–∫–∞", "–ê–ª—Ç–∞–π—Å–∫–∏–π –∫—Ä–∞–π", "–ó–∞–±–∞–π–∫–∞–ª—å—Å–∫–∏–π –∫—Ä–∞–π", "–ö–∞–º—á–∞—Ç—Å–∫–∏–π –∫—Ä–∞–π",
            "–ö—Ä–∞—Å–Ω–æ–¥–∞—Ä—Å–∫–∏–π –∫—Ä–∞–π", "–ö—Ä–∞—Å–Ω–æ—è—Ä—Å–∫–∏–π –∫—Ä–∞–π", "–ü–µ—Ä–º—Å–∫–∏–π –∫—Ä–∞–π", "–ü—Ä–∏–º–æ—Ä—Å–∫–∏–π –∫—Ä–∞–π",
            "–°—Ç–∞–≤—Ä–æ–ø–æ–ª—å—Å–∫–∏–π –∫—Ä–∞–π", "–•–∞–±–∞—Ä–æ–≤—Å–∫–∏–π –∫—Ä–∞–π", "–ê–º—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ê—Ä—Ö–∞–Ω–≥–µ–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ê—Å—Ç—Ä–∞—Ö–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ë–µ–ª–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ë—Ä—è–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–í–æ–ª–≥–æ–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–æ–ª–æ–≥–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–í–æ—Ä–æ–Ω–µ–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ò–≤–∞–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ò—Ä–∫—É—Ç—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–∞–ª–∏–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–∞–ª—É–∂—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–µ–º–µ—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ö–∏—Ä–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö–æ—Å—Ç—Ä–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö—É—Ä–≥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ö—É—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–õ–µ–Ω–∏–Ω–≥—Ä–∞–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–õ–∏–ø–µ—Ü–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ú–∞–≥–∞–¥–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ú–æ—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ú—É—Ä–º–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ù–∏–∂–µ–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ù–æ–≤–≥–æ—Ä–æ–¥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–û–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–û—Ä–µ–Ω–±—É—Ä–≥—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–û—Ä–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ü–µ–Ω–∑–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ü—Å–∫–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–†–æ—Å—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–†—è–∑–∞–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–∞–º–∞—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–°–∞—Ä–∞—Ç–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–∞—Ö–∞–ª–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–≤–µ—Ä–¥–ª–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–°–º–æ–ª–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–¢–∞–º–±–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢–≤–µ—Ä—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢–æ–º—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–¢—É–ª—å—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–¢—é–º–µ–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–£–ª—å—è–Ω–æ–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–ß–µ–ª—è–±–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å", "–Ø—Ä–æ—Å–ª–∞–≤—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ú–æ—Å–∫–≤–∞", "–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥", "–°–µ–≤–∞—Å—Ç–æ–ø–æ–ª—å", "–ï–≤—Ä–µ–π—Å–∫–∞—è –∞–≤—Ç–æ–Ω–æ–º–Ω–∞—è –æ–±–ª–∞—Å—Ç—å",
            "–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥", "–•–∞–Ω—Ç—ã-–ú–∞–Ω—Å–∏–π—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥ ‚Äî –Æ–≥—Ä–∞",
            "–ß—É–∫–æ—Ç—Å–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥", "–Ø–º–∞–ª–æ-–ù–µ–Ω–µ—Ü–∫–∏–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π –æ–∫—Ä—É–≥"
        ];

        const banks = [
            "–°–±–µ—Ä–±–∞–Ω–∫", "–í–¢–ë", "–ì–∞–∑–ø—Ä–æ–º–±–∞–Ω–∫", "–ê–ª—å—Ñ–∞-–ë–∞–Ω–∫", "–†–æ—Å—Å–µ–ª—å—Ö–æ–∑–±–∞–Ω–∫",
            "–ú–æ—Å–∫–æ–≤—Å–∫–∏–π –∫—Ä–µ–¥–∏—Ç–Ω—ã–π –±–∞–Ω–∫ (–ú–ö–ë)", "–¢-–ë–∞–Ω–∫ (–¢–∏–Ω—å–∫–æ—Ñ—Ñ)", "–°–æ–≤–∫–æ–º–±–∞–Ω–∫",
            "–ë–∞–Ω–∫ –î–û–ú.–†–§", "–†–∞–π—Ñ—Ñ–∞–π–∑–µ–Ω–±–∞–Ω–∫", "–ë–∞–Ω–∫ ¬´–†–æ—Å—Å–∏—è¬ª", "–ë–∞–Ω–∫ ¬´–°–∞–Ω–∫—Ç-–ü–µ—Ç–µ—Ä–±—É—Ä–≥¬ª",
            "–ù–æ–≤–∏–∫–æ–º", "–ê–∫ –ë–∞—Ä—Å –ë–∞–Ω–∫", "–ë–∞–Ω–∫ –£—Ä–∞–ª—Å–∏–±", "–î—Ä—É–≥–æ–π –±–∞–Ω–∫"
        ];

        function getAnketaResult() {
            return {
                raw: anketaData,
                derived: {}
            };
        }

        function clearValue(value) {
            if (typeof value === 'string') return "";
            if (typeof value === 'number') return null;
            if (Array.isArray(value)) return [];
            return null;
        }

        function renderStep1() {
            return `
                <h1>–û–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è</h1>
                <p class="step-description">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –æ–±—â–∏–µ —Å–≤–µ–¥–µ–Ω–∏—è. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–∏–º–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏—è –¥–µ–ª–∞ –∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∞–ª—å–Ω–æ–π –ø–æ–¥—Å—É–¥–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –æ–±—â–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–†–µ–≥–∏–æ–Ω —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –º–µ—Å—Ç—É –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞</label>
                    <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ —Å—É–±—ä–µ–∫—Ç –†–æ—Å—Å–∏–π—Å–∫–æ–π –§–µ–¥–µ—Ä–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –º–µ—Å—Ç—É –∂–∏—Ç–µ–ª—å—Å—Ç–≤–∞ (–ø—Ä–æ–ø–∏—Å–∫–∞).</span>
                    <select id="region" onchange="updateData('step1_general', 'region', this.value); updateButtonState()">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω</option>
                        ${regions.map(r => `<option value="${r}" ${anketaData.answers.step1_general.region === r ? 'selected' : ''}>${r}</option>`).join('')}
                    </select>
                    <span class="error-message" id="error-region">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="info-block">
                    <h3>–£–∫–∞–∂–∏—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ (–∑–∞—â–∏—Ç–∞ –æ—Ç –º–æ—à–µ–Ω–Ω–∏–∫–æ–≤)</h3>
                    <p>–î–∞–Ω–Ω—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ—Å—Ç–∏ –æ–±—Ä–∞—â–µ–Ω–∏—è –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–µ–¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω—ã—Ö –∑–∞—è–≤–æ–∫.</p>
                </div>

                <div class="question-block">
                    <label class="question-label">–§–∞–º–∏–ª–∏—è –∏ –∏–º—è</label>
                    <span class="question-hint">–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–∏ —Ñ–∞–º–∏–ª–∏—é –∏ –∏–º—è —Ç–∞–∫, –∫–∞–∫ –æ–Ω–∏ —É–∫–∞–∑–∞–Ω—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ö.</span>
                    <input type="text" id="fullName" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω" value="${anketaData.answers.step1_general.fullName}" oninput="updateData('step1_general', 'fullName', this.value); updateButtonState()">
                    <span class="error-message" id="error-fullName">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ü—Ä–∏–∑–Ω–∞–≤–∞–ª–∏—Å—å –ª–∏ –≤—ã —Ä–∞–Ω–µ–µ –Ω–µ—Å–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω—ã–º (–±–∞–Ω–∫—Ä–æ—Ç–æ–º)?</label>
                    <span class="question-hint">–†–µ—á—å –∏–¥—ë—Ç –æ –∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–π –ø—Ä–æ—Ü–µ–¥—É—Ä–µ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞, –≤–∫–ª—é—á–∞—è —Å—É–¥–µ–±–Ω—É—é –ø—Ä–æ—Ü–µ–¥—É—Ä—É –∏–ª–∏ –≤–Ω–µ—Å—É–¥–µ–±–Ω–æ–µ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ú–§–¶.</span>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="wasBankrupt-yes" name="wasBankrupt" value="yes" ${anketaData.answers.step1_general.wasBankrupt === true ? 'checked' : ''} onchange="updateData('step1_general', 'wasBankrupt', true); renderCurrentStep()">
                            <label for="wasBankrupt-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="wasBankrupt-no" name="wasBankrupt" value="no" ${anketaData.answers.step1_general.wasBankrupt === false ? 'checked' : ''} onchange="updateData('step1_general', 'wasBankrupt', false); renderCurrentStep()">
                            <label for="wasBankrupt-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-wasBankrupt">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step1_general.wasBankrupt === true ? `
                    <div class="question-block">
                        <label class="question-label">–í –∫–∞–∫–æ–º –≥–æ–¥—É –≤—ã –±—ã–ª–∏ –ø—Ä–∏–∑–Ω–∞–Ω—ã –±–∞–Ω–∫—Ä–æ—Ç–æ–º?</label>
                        <input type="number" id="bankruptYear" value="${anketaData.answers.step1_general.bankruptYear || ''}" oninput="updateData('step1_general', 'bankruptYear', parseInt(this.value) || null); updateButtonState()">
                        <span class="error-message" id="error-bankruptYear">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>

                    <div class="question-block">
                        <label class="question-label">–í –∫–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ –ø—Ä–æ—Ö–æ–¥–∏–ª–∞ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞?</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="bankruptType-court" name="bankruptType" value="court" ${anketaData.answers.step1_general.bankruptType === 'court' ? 'checked' : ''} onchange="updateData('step1_general', 'bankruptType', 'court'); updateButtonState()">
                                <label for="bankruptType-court">–°—É–¥–µ–±–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="bankruptType-mfc" name="bankruptType" value="mfc" ${anketaData.answers.step1_general.bankruptType === 'mfc' ? 'checked' : ''} onchange="updateData('step1_general', 'bankruptType', 'mfc'); updateButtonState()">
                                <label for="bankruptType-mfc">–í–Ω–µ—Å—É–¥–µ–±–Ω–æ–µ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–æ —á–µ—Ä–µ–∑ –ú–§–¶</label>
                            </div>
                        </div>
                        <span class="error-message" id="error-bankruptType">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep2() {
            const showMarriageQuestions = anketaData.answers.step2_family.isMarried === true || 
                (anketaData.answers.step2_family.isMarried === false && anketaData.answers.step2_family.wasMarriedLast3Years === true);
            
            return `
                <h1>–°–µ–º–µ–π–Ω–æ–µ –ø–æ–ª–æ–∂–µ–Ω–∏–µ</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Å–µ–º–µ–π–Ω–æ–º –ø–æ–ª–æ–∂–µ–Ω–∏–∏. –î–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –æ—Ç–Ω–æ—à–µ–Ω–∏–π –∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—Ä–∞–≤–æ–≤—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –ø—Ä–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ –¥–µ–ª–∞ –æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ.</p>
                
                <div class="question-block">
                    <label class="question-label">–°–æ—Å—Ç–æ–∏—Ç–µ –ª–∏ –≤—ã –≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –±—Ä–∞–∫–µ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç?</label>
                    <span class="question-hint">–£—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –±—Ä–∞–∫ –Ω–∞ –¥–∞—Ç—É –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∞–Ω–∫–µ—Ç—ã.</span>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="isMarried-yes" name="isMarried" value="yes" ${anketaData.answers.step2_family.isMarried === true ? 'checked' : ''} onchange="updateData('step2_family', 'isMarried', true); clearConditionalFields('step2_family', ['wasMarriedLast3Years']); renderCurrentStep()">
                            <label for="isMarried-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="isMarried-no" name="isMarried" value="no" ${anketaData.answers.step2_family.isMarried === false ? 'checked' : ''} onchange="updateData('step2_family', 'isMarried', false); renderCurrentStep()">
                            <label for="isMarried-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-isMarried">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step2_family.isMarried === false ? `
                    <div class="question-block">
                        <label class="question-label">–°–æ—Å—Ç–æ—è–ª–∏ –ª–∏ –≤—ã –≤ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –±—Ä–∞–∫–µ –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 3 –ª–µ—Ç?</label>
                        <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ, –µ—Å–ª–∏ –±—Ä–∞–∫ –±—ã–ª —Ä–∞—Å—Ç–æ—Ä–≥–Ω—É—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Ç—Ä—ë—Ö –ª–µ—Ç.</span>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="wasMarriedLast3Years-yes" name="wasMarriedLast3Years" value="yes" ${anketaData.answers.step2_family.wasMarriedLast3Years === true ? 'checked' : ''} onchange="updateData('step2_family', 'wasMarriedLast3Years', true); renderCurrentStep()">
                                <label for="wasMarriedLast3Years-yes">–î–∞</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="wasMarriedLast3Years-no" name="wasMarriedLast3Years" value="no" ${anketaData.answers.step2_family.wasMarriedLast3Years === false ? 'checked' : ''} onchange="updateData('step2_family', 'wasMarriedLast3Years', false); clearConditionalFields('step2_family', ['spouseTransactions', 'spouseTransactionTypes', 'spouseProperty']); renderCurrentStep()">
                                <label for="wasMarriedLast3Years-no">–ù–µ—Ç</label>
                            </div>
                        </div>
                        <span class="error-message" id="error-wasMarriedLast3Years">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}

                ${showMarriageQuestions ? `
                    <div class="question-block">
                        <label class="question-label">–°–æ–≤–µ—Ä—à–∞–ª –ª–∏ –≤–∞—à —Å—É–ø—Ä—É–≥ (–∏–ª–∏ –±—ã–≤—à–∏–π —Å—É–ø—Ä—É–≥) —Å–¥–µ–ª–∫–∏ —Å –∏–º—É—â–µ—Å—Ç–≤–æ–º –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 3 –≥–æ–¥–∞?</label>
                        <span class="question-hint">–ü–æ–¥ —Å–¥–µ–ª–∫–∞–º–∏ –ø–æ–Ω–∏–º–∞–µ—Ç—Å—è –æ—Ç—á—É–∂–¥–µ–Ω–∏–µ, –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∏–ª–∏ –∏–Ω–æ–µ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–µ –∏–º—É—â–µ—Å—Ç–≤–æ–º.</span>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="spouseTransactions-yes" name="spouseTransactions" value="yes" ${anketaData.answers.step2_family.spouseTransactions === true ? 'checked' : ''} onchange="updateData('step2_family', 'spouseTransactions', true); renderCurrentStep()">
                                <label for="spouseTransactions-yes">–î–∞</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="spouseTransactions-no" name="spouseTransactions" value="no" ${anketaData.answers.step2_family.spouseTransactions === false ? 'checked' : ''} onchange="updateData('step2_family', 'spouseTransactions', false); clearConditionalFields('step2_family', ['spouseTransactionTypes']); renderCurrentStep()">
                                <label for="spouseTransactions-no">–ù–µ—Ç</label>
                            </div>
                        </div>
                        <span class="error-message" id="error-spouseTransactions">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>

                    ${anketaData.answers.step2_family.spouseTransactions === true ? `
                        <div class="question-block">
                            <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –≤–∏–¥ –∏–º—É—â–µ—Å—Ç–≤–∞, –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ–≤–µ—Ä—à–∞–ª–∏—Å—å —Å–¥–µ–ª–∫–∏</label>
                            <span class="question-hint">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.</span>
                            <div class="checkbox-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="spouseTransType-realty" value="–ù–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ" ${anketaData.answers.step2_family.spouseTransactionTypes.includes('–ù–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseTransactionTypes', this.value, this.checked)">
                                    <label for="spouseTransType-realty">–ù–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="spouseTransType-vehicles" value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞" ${anketaData.answers.step2_family.spouseTransactionTypes.includes('–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseTransactionTypes', this.value, this.checked)">
                                    <label for="spouseTransType-vehicles">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞</label>
                                </div>
                                <div class="checkbox-option">
                                    <input type="checkbox" id="spouseTransType-other" value="–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ" ${anketaData.answers.step2_family.spouseTransactionTypes.includes('–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseTransactionTypes', this.value, this.checked)">
                                    <label for="spouseTransType-other">–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ</label>
                                </div>
                            </div>
                            <span class="error-message" id="error-spouseTransactionTypes">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                        </div>
                    ` : ''}

                    <div class="question-block">
                        <label class="question-label">–ö–∞–∫–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ, –ø—Ä–∏–æ–±—Ä–µ—Ç—ë–Ω–Ω–æ–µ –≤ –ø–µ—Ä–∏–æ–¥ –±—Ä–∞–∫–∞, –∏–º–µ–µ—Ç—Å—è —É –≤–∞—à–µ–≥–æ —Å—É–ø—Ä—É–≥–∞ (–∏–ª–∏ –±—ã–≤—à–µ–≥–æ —Å—É–ø—Ä—É–≥–∞)?</label>
                        <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ –∏–º—É—â–µ—Å—Ç–≤–æ, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–æ–≥–æ, –Ω–∞ –∫–æ–≥–æ –æ–Ω–æ –±—ã–ª–æ –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ.</span>
                        <div class="checkbox-group">
                            <div class="checkbox-option">
                                <input type="checkbox" id="spouseProp-none" value="–ù–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–∞" ${anketaData.answers.step2_family.spouseProperty.includes('–ù–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–∞') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseProperty', this.value, this.checked)">
                                <label for="spouseProp-none">–ù–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–∞</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="spouseProp-realty" value="–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å" ${anketaData.answers.step2_family.spouseProperty.includes('–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseProperty', this.value, this.checked)">
                                <label for="spouseProp-realty">–ù–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="spouseProp-vehicles" value="–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞" ${anketaData.answers.step2_family.spouseProperty.includes('–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseProperty', this.value, this.checked)">
                                <label for="spouseProp-vehicles">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="spouseProp-shares" value="–î–æ–ª–∏ –≤ –∏–º—É—â–µ—Å—Ç–≤–µ" ${anketaData.answers.step2_family.spouseProperty.includes('–î–æ–ª–∏ –≤ –∏–º—É—â–µ—Å—Ç–≤–µ') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseProperty', this.value, this.checked)">
                                <label for="spouseProp-shares">–î–æ–ª–∏ –≤ –∏–º—É—â–µ—Å—Ç–≤–µ</label>
                            </div>
                            <div class="checkbox-option">
                                <input type="checkbox" id="spouseProp-other" value="–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ" ${anketaData.answers.step2_family.spouseProperty.includes('–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ') ? 'checked' : ''} onchange="updateCheckbox('step2_family', 'spouseProperty', this.value, this.checked)">
                                <label for="spouseProp-other">–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ</label>
                            </div>
                        </div>
                        <span class="error-message" id="error-spouseProperty">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep3() {
            return `
                <h1>–ù–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏–µ –¥–µ—Ç–∏</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö –¥–µ—Ç–µ–π. –î–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –æ—Ü–µ–Ω–∫–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–ò–º–µ—é—Ç—Å—è –ª–∏ —É –≤–∞—Å –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏–µ –¥–µ—Ç–∏?</label>
                    <span class="question-hint">–£—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –¥–µ—Ç–∏, –Ω–µ –¥–æ—Å—Ç–∏–≥—à–∏–µ 18 –ª–µ—Ç, –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –º–µ—Å—Ç–∞ –∏—Ö –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.</span>
                    <select id="childrenCount" onchange="updateData('step3_children', 'childrenCount', this.value); clearConditionalFields('step3_children', ['monthlyExpenses']); renderCurrentStep()">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                        <option value="–î–µ—Ç–µ–π –Ω–µ—Ç" ${anketaData.answers.step3_children.childrenCount === '–î–µ—Ç–µ–π –Ω–µ—Ç' ? 'selected' : ''}>–î–µ—Ç–µ–π –Ω–µ—Ç</option>
                        <option value="1" ${anketaData.answers.step3_children.childrenCount === '1' ? 'selected' : ''}>1</option>
                        <option value="2" ${anketaData.answers.step3_children.childrenCount === '2' ? 'selected' : ''}>2</option>
                        <option value="3" ${anketaData.answers.step3_children.childrenCount === '3' ? 'selected' : ''}>3</option>
                        <option value="4" ${anketaData.answers.step3_children.childrenCount === '4' ? 'selected' : ''}>4</option>
                        <option value="5" ${anketaData.answers.step3_children.childrenCount === '5' ? 'selected' : ''}>5</option>
                    </select>
                    <span class="error-message" id="error-childrenCount">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step3_children.childrenCount && anketaData.answers.step3_children.childrenCount !== '–î–µ—Ç–µ–π –Ω–µ—Ç' ? `
                    <div class="question-block">
                        <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –µ–∂–µ–º–µ—Å—è—á–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö –¥–µ—Ç–µ–π</label>
                        <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ —Å—Ä–µ–¥–Ω—é—é —Å—É–º–º—É –µ–∂–µ–º–µ—Å—è—á–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–ª–µ—Ç–Ω–∏—Ö –¥–µ—Ç–µ–π.</span>
                        <input type="number" id="monthlyExpenses" value="${anketaData.answers.step3_children.monthlyExpenses || ''}" oninput="updateData('step3_children', 'monthlyExpenses', parseInt(this.value) || null); updateButtonState()">
                        <span class="error-message" id="error-monthlyExpenses">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep4() {
            return `
                <h1>–î–æ–ª–≥–∏ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ —Ä–∞–∑–º–µ—Ä–µ –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–µ –∏–º–µ—é—â–µ–π—Å—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏. –≠—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –µ—ë —Ñ–æ—Ä–º–∞—Ç–∞.</p>
                
                <div class="question-block">
                    <label class="question-label">–°—É–º–º–∞ –≤—Å–µ—Ö –¥–æ–ª–≥–æ–≤</label>
                    <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ –æ–±—â—É—é —Å—É–º–º—É –≤—Å–µ—Ö –∏–º–µ—é—â–∏—Ö—Å—è –¥–æ–ª–≥–æ–≤ (–≤ —Ä—É–±–ª—è—Ö).</span>
                    <input type="number" id="totalDebt" value="${anketaData.answers.step4_debts.totalDebt || ''}" oninput="updateData('step4_debts', 'totalDebt', parseInt(this.value) || null); updateButtonState()">
                    <span class="error-message" id="error-totalDebt">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ò–º–µ—é—Ç—Å—è –ª–∏ —É –≤–∞—Å –¥–æ–ª–≥–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–æ–¥–ª–µ–∂–∞—Ç —Å–ø–∏—Å–∞–Ω–∏—é –ø—Ä–∏ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ?</label>
                    <span class="question-hint">–ö —Ç–∞–∫–∏–º –¥–æ–ª–≥–∞–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–∫–æ–Ω–æ–º.</span>
                    <select id="nonDischargeable" onchange="updateData('step4_debts', 'nonDischargeable', this.value); updateButtonState()">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                        <option value="–ù–µ—Ç" ${anketaData.answers.step4_debts.nonDischargeable === '–ù–µ—Ç' ? 'selected' : ''}>–ù–µ—Ç</option>
                        <option value="–ê–ª–∏–º–µ–Ω—Ç—ã" ${anketaData.answers.step4_debts.nonDischargeable === '–ê–ª–∏–º–µ–Ω—Ç—ã' ? 'selected' : ''}>–ê–ª–∏–º–µ–Ω—Ç—ã</option>
                        <option value="–í–æ–∑–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–¥–∞ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—é" ${anketaData.answers.step4_debts.nonDischargeable === '–í–æ–∑–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–¥–∞ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—é' ? 'selected' : ''}>–í–æ–∑–º–µ—â–µ–Ω–∏–µ –≤—Ä–µ–¥–∞ –∂–∏–∑–Ω–∏ –∏ –∑–¥–æ—Ä–æ–≤—å—é</option>
                        <option value="–û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ –ø—Ä–∏–≥–æ–≤–æ—Ä—É —Å—É–¥–∞" ${anketaData.answers.step4_debts.nonDischargeable === '–û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ –ø—Ä–∏–≥–æ–≤–æ—Ä—É —Å—É–¥–∞' ? 'selected' : ''}>–û–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –ø–æ –ø—Ä–∏–≥–æ–≤–æ—Ä—É —Å—É–¥–∞</option>
                        <option value="–ù–µ—Å–∫–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö" ${anketaData.answers.step4_debts.nonDischargeable === '–ù–µ—Å–∫–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö' ? 'selected' : ''}>–ù–µ—Å–∫–æ–ª—å–∫–æ –∏–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö</option>
                    </select>
                    <span class="error-message" id="error-nonDischargeable">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>
            `;
        }

        function renderStep5() {
            return `
                <h1>–ö—Ä–µ–¥–∏—Ç—ã –∏ –∑–∞–π–º—ã</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É –≤–∞—Å –∏–º–µ—é—Ç—Å—è –∫—Ä–µ–¥–∏—Ç—ã –∏–ª–∏ –∑–∞–π–º—ã. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–í—ã–±–µ—Ä–∏—Ç–µ –±–∞–Ω–∫–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É –≤–∞—Å –∏–º–µ—é—Ç—Å—è –∫—Ä–µ–¥–∏—Ç—ã (–∑–∞–π–º—ã)</label>
                    <span class="question-hint">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –±–∞–Ω–∫–æ–≤. –£–∫–∞–∂–∏—Ç–µ –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏, –≤ –∫–æ—Ç–æ—Ä—ã—Ö —É –≤–∞—Å –∏–º–µ—é—Ç—Å—è –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞.</span>
                    <div class="checkbox-group">
                        ${banks.map((bank, idx) => `
                            <div class="checkbox-option">
                                <input type="checkbox" id="bank-${idx}" value="${bank}" ${anketaData.answers.step5_banks.selectedBanks.includes(bank) ? 'checked' : ''} onchange="updateCheckbox('step5_banks', 'selectedBanks', this.value, this.checked); renderCurrentStep()">
                                <label for="bank-${idx}">${bank}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-selectedBanks">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step5_banks.selectedBanks.includes('–î—Ä—É–≥–æ–π –±–∞–Ω–∫') ? `
                    <div class="question-block">
                        <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –Ω–∞–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏</label>
                        <input type="text" id="otherBankName" value="${anketaData.answers.step5_banks.otherBankName}" oninput="updateData('step5_banks', 'otherBankName', this.value); updateButtonState()">
                        <span class="error-message" id="error-otherBankName">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep6() {
            const selectedBanks = anketaData.answers.step5_banks.selectedBanks;
            
            return `
                <h1>–°–≤–µ–¥–µ–Ω–∏—è –æ –∫—Ä–µ–¥–∏—Ç–∞—Ö</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –∫—Ä–µ–¥–∏—Ç–∞—Ö –∏ –∑–∞–π–º–∞—Ö –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–≤–Ω–æ—Å—Ç–∏ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤ –∏ –æ—Ü–µ–Ω–∫–∏ –¥–æ–±—Ä–æ—Å–æ–≤–µ—Å—Ç–Ω–æ—Å—Ç–∏ –∑–∞—ë–º—â–∏–∫–∞.</p>
                
                ${selectedBanks.map(bank => {
                    if (!anketaData.answers.step6_bankCredits[bank]) {
                        anketaData.answers.step6_bankCredits[bank] = {
                            count: null,
                            credits: []
                        };
                    }
                    
                    const bankData = anketaData.answers.step6_bankCredits[bank];
                    const creditCount = bankData.count || 0;
                    
                    return `
                        <div class="bank-block">
                            <h3>${bank}</h3>
                            
                            <div class="question-block">
                                <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫—Ä–µ–¥–∏—Ç–æ–≤ (–∑–∞–π–º–æ–≤) –≤ –¥–∞–Ω–Ω–æ–º –±–∞–Ω–∫–µ</label>
                                <select id="bankCount-${bank}" onchange="updateBankCreditCount('${bank}', parseInt(this.value))">
                                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                                    ${[1,2,3,4,5].map(n => `<option value="${n}" ${bankData.count === n ? 'selected' : ''}>${n}</option>`).join('')}
                                </select>
                                <span class="error-message" id="error-bankCount-${bank}">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                            </div>

                            ${creditCount > 0 ? Array.from({length: creditCount}, (_, i) => {
                                if (!bankData.credits[i]) {
                                    bankData.credits[i] = {
                                        amount: null,
                                        monthsAgo: null,
                                        paymentsCount: null
                                    };
                                }
                                const credit = bankData.credits[i];
                                
                                return `
                                    <div class="credit-block">
                                        <h4>–ö—Ä–µ–¥–∏—Ç ‚Ññ${i + 1}</h4>
                                        
                                        <div class="question-block">
                                            <label class="question-label">–°—É–º–º–∞ –∫—Ä–µ–¥–∏—Ç–∞ (–∑–∞–π–º–∞)</label>
                                            <input type="number" id="credit-${bank}-${i}-amount" value="${credit.amount || ''}" oninput="updateBankCredit('${bank}', ${i}, 'amount', parseInt(this.value) || null); updateButtonState()">
                                            <span class="error-message" id="error-credit-${bank}-${i}-amount">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                                        </div>
                                        
                                        <div class="question-block">
                                            <label class="question-label">–°–∫–æ–ª—å–∫–æ –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥ –±—ã–ª –≤–∑—è—Ç –∫—Ä–µ–¥–∏—Ç</label>
                                            <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–µ—Å—è—Ü–µ–≤, –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –∫—Ä–µ–¥–∏—Ç–∞.</span>
                                            <input type="number" id="credit-${bank}-${i}-monthsAgo" value="${credit.monthsAgo !== null ? credit.monthsAgo : ''}" oninput="updateBankCredit('${bank}', ${i}, 'monthsAgo', parseInt(this.value) || 0); updateButtonState()">
                                            <span class="error-message" id="error-credit-${bank}-${i}-monthsAgo">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                                        </div>
                                        
                                        <div class="question-block">
                                            <label class="question-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—Å—ë–Ω–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π –ø–æ –∫—Ä–µ–¥–∏—Ç—É</label>
                                            <input type="number" id="credit-${bank}-${i}-paymentsCount" value="${credit.paymentsCount !== null ? credit.paymentsCount : ''}" oninput="updateBankCredit('${bank}', ${i}, 'paymentsCount', parseInt(this.value) || 0); updateButtonState()">
                                            <span class="error-message" id="error-credit-${bank}-${i}-paymentsCount">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                                        </div>
                                    </div>
                                `;
                            }).join('') : ''}
                        </div>
                    `;
                }).join('')}
            `;
        }

        function updateBankCreditCount(bank, count) {
            anketaData.answers.step6_bankCredits[bank].count = count;
            
            if (anketaData.answers.step6_bankCredits[bank].credits.length > count) {
                anketaData.answers.step6_bankCredits[bank].credits = anketaData.answers.step6_bankCredits[bank].credits.slice(0, count);
            }
            
            renderCurrentStep();
        }

        function updateBankCredit(bank, index, field, value) {
            if (!anketaData.answers.step6_bankCredits[bank].credits[index]) {
                anketaData.answers.step6_bankCredits[bank].credits[index] = {};
            }
            anketaData.answers.step6_bankCredits[bank].credits[index][field] = value;
        }

        function renderStep7() {
            return `
                <h1>–ó–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –∑–∞–π–º–∞—Ö, –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –≤ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö (–º–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö) –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è—Ö. –î–∞–Ω–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–ò–º–µ–µ—Ç—Å—è –ª–∏ —É –≤–∞—Å –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ (–ú–§–û)?</label>
                    <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö (–º–∏–∫—Ä–æ–∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö) –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã –±—Ä–∞–ª–∏ –∑–∞–π–º—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤.</span>
                    <input type="number" id="mfoCount" value="${anketaData.answers.step7_mfo.mfoCount !== null ? anketaData.answers.step7_mfo.mfoCount : ''}" oninput="updateData('step7_mfo', 'mfoCount', parseInt(this.value) || 0); clearConditionalFields('step7_mfo', ['mfoTotalDebt']); renderCurrentStep()">
                    <span class="error-message" id="error-mfoCount">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step7_mfo.mfoCount > 0 ? `
                    <div class="question-block">
                        <label class="question-label">–ö–∞–∫–∞—è –æ–±—â–∞—è –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏?</label>
                        <span class="question-hint">–£–∫–∞–∂–∏—Ç–µ –ø—Ä–∏–º–µ—Ä–Ω—É—é –æ–±—â—É—é —Å—É–º–º—É –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –º–∏–∫—Ä–æ—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–º–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è–º–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤.</span>
                        <input type="number" id="mfoTotalDebt" placeholder="120 000" value="${anketaData.answers.step7_mfo.mfoTotalDebt !== null ? anketaData.answers.step7_mfo.mfoTotalDebt : ''}" oninput="updateData('step7_mfo', 'mfoTotalDebt', parseInt(this.value) || 0); updateButtonState()">
                        <span class="error-message" id="error-mfoTotalDebt">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep8() {
            return `
                <h1>–†–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ, –Ω–∞ –∫–∞–∫–∏–µ —Ü–µ–ª–∏ –±—ã–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∞ —Ä–∞—Å—Ö–æ–¥–æ–≤ –∏ –æ–±—â–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–ù–∞ –∫–∞–∫–∏–µ —Ü–µ–ª–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Ä–∞—Å—Ö–æ–¥–æ–≤–∞–ª–∏—Å—å –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞?</label>
                    <span class="question-hint">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤. –£–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ç–µ —Ü–µ–ª–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–∏–±–æ–ª–µ–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –≤–∞—à–µ–π —Å–∏—Ç—É–∞—Ü–∏–∏.</span>
                    <div class="checkbox-group">
                        ${[
                            '–ü–æ–≥–∞—à–µ–Ω–∏–µ —Ä–∞–Ω–µ–µ –≤–∑—è—Ç—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤ –∏ –∑–∞–π–º–æ–≤',
                            '–ü–æ–≤—Å–µ–¥–Ω–µ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (–ø–∏—Ç–∞–Ω–∏–µ, –æ–¥–µ–∂–¥–∞, –±—ã—Ç–æ–≤—ã–µ –Ω—É–∂–¥—ã)',
                            '–û–ø–ª–∞—Ç–∞ –∂–∏–ª—å—è –∏ –∫–æ–º–º—É–Ω–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥',
                            '–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ —Ä–∞—Å—Ö–æ–¥—ã',
                            '–†–∞—Å—Ö–æ–¥—ã –Ω–∞ –¥–µ—Ç–µ–π',
                            '–†–µ–º–æ–Ω—Ç –∂–∏–ª—å—è',
                            '–ü–æ–∫—É–ø–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è',
                            '–í–µ–¥–µ–Ω–∏–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ / —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç—å',
                            '–ò–Ω—ã–µ —Ü–µ–ª–∏'
                        ].map((purpose, idx) => `
                            <div class="checkbox-option">
                                <input type="checkbox" id="purpose-${idx}" value="${purpose}" ${anketaData.answers.step8_spending.purposes.includes(purpose) ? 'checked' : ''} onchange="updateCheckbox('step8_spending', 'purposes', this.value, this.checked); renderCurrentStep()">
                                <label for="purpose-${idx}">${purpose}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-purposes">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step8_spending.purposes.includes('–ò–Ω—ã–µ —Ü–µ–ª–∏') ? `
                    <div class="question-block">
                        <label class="question-label">–£—Ç–æ—á–Ω–∏—Ç–µ, –Ω–∞ –∫–∞–∫–∏–µ –∏–Ω—ã–µ —Ü–µ–ª–∏ –±—ã–ª–∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω—ã –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞</label>
                        <input type="text" id="otherPurpose" value="${anketaData.answers.step8_spending.otherPurpose}" oninput="updateData('step8_spending', 'otherPurpose', this.value); updateButtonState()">
                        <span class="error-message" id="error-otherPurpose">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}

                <div class="question-block">
                    <label class="question-label">–ë—ã–ª–∏ –ª–∏ –∑–∞ —Å—á—ë—Ç –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ —Å–æ–≤–µ—Ä—à–µ–Ω—ã –∫—Ä—É–ø–Ω—ã–µ —Ä–∞–∑–æ–≤—ã–µ —Ä–∞—Å—Ö–æ–¥—ã?</label>
                    <div class="radio-group">
                        ${[
                            {value: '–ù–µ—Ç', label: '–ù–µ—Ç'},
                            {value: '–î–∞, –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω—É–∂–¥—ã', label: '–î–∞, –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω—É–∂–¥—ã'},
                            {value: '–î–∞, –Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∏–º—É—â–µ—Å—Ç–≤–∞', label: '–î–∞, –Ω–∞ –ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ –∏–º—É—â–µ—Å—Ç–≤–∞'},
                            {value: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å', label: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å'}
                        ].map((opt, idx) => `
                            <div class="radio-option">
                                <input type="radio" id="largePurchases-${idx}" name="largePurchases" value="${opt.value}" ${anketaData.answers.step8_spending.largePurchases === opt.value ? 'checked' : ''} onchange="updateData('step8_spending', 'largePurchases', this.value); updateButtonState()">
                                <label for="largePurchases-${idx}">${opt.label}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-largePurchases">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ü—Ä–∏–æ–±—Ä–µ—Ç–∞–ª–æ—Å—å –ª–∏ –∑–∞ —Å—á—ë—Ç –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤ –∏–º—É—â–µ—Å—Ç–≤–æ –∏ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å –ª–∏ –æ–Ω–æ –Ω–∞ –Ω–∞—Å—Ç–æ—è—â–∏–π –º–æ–º–µ–Ω—Ç?</label>
                    <div class="radio-group">
                        ${[
                            {value: '–ù–µ—Ç', label: '–ù–µ—Ç'},
                            {value: '–î–∞, –∏–º—É—â–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å', label: '–î–∞, –∏–º—É—â–µ—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª–æ—Å—å'},
                            {value: '–î–∞, –∏–º—É—â–µ—Å—Ç–≤–æ —É—Ç—Ä–∞—á–µ–Ω–æ –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ', label: '–î–∞, –∏–º—É—â–µ—Å—Ç–≤–æ —É—Ç—Ä–∞—á–µ–Ω–æ –∏–ª–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ'},
                            {value: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å', label: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å'}
                        ].map((opt, idx) => `
                            <div class="radio-option">
                                <input type="radio" id="propertyPurchased-${idx}" name="propertyPurchased" value="${opt.value}" ${anketaData.answers.step8_spending.propertyPurchased === opt.value ? 'checked' : ''} onchange="updateData('step8_spending', 'propertyPurchased', this.value); clearConditionalFields('step8_spending', ['propertyType']); renderCurrentStep()">
                                <label for="propertyPurchased-${idx}">${opt.label}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-propertyPurchased">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step8_spending.propertyPurchased && anketaData.answers.step8_spending.propertyPurchased.startsWith('–î–∞') ? `
                    <div class="question-block">
                        <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –≤–∏–¥ –∏–º—É—â–µ—Å—Ç–≤–∞</label>
                        <div class="radio-group">
                            ${[
                                {value: '–ù–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ', label: '–ù–µ–¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ'},
                                {value: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞', label: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞'},
                                {value: '–ò–Ω–æ–µ –¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ', label: '–ò–Ω–æ–µ –¥–≤–∏–∂–∏–º–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ'}
                            ].map((opt, idx) => `
                                <div class="radio-option">
                                    <input type="radio" id="propertyType-${idx}" name="propertyType" value="${opt.value}" ${anketaData.answers.step8_spending.propertyType === opt.value ? 'checked' : ''} onchange="updateData('step8_spending', 'propertyType', this.value); updateButtonState()">
                                    <label for="propertyType-${idx}">${opt.label}</label>
                                </div>
                            `).join('')}
                        </div>
                        <span class="error-message" id="error-propertyType">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}

                <div class="question-block">
                    <label class="question-label">–ü–µ—Ä–µ—á–∏—Å–ª—è–ª–∏—Å—å –ª–∏ –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º?</label>
                    <div class="radio-group">
                        ${[
                            {value: '–ù–µ—Ç', label: '–ù–µ—Ç'},
                            {value: '–î–∞, –¥–ª—è –ø–æ–≥–∞—à–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤', label: '–î–∞, –¥–ª—è –ø–æ–≥–∞—à–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤'},
                            {value: '–î–∞, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–º–æ—â–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º', label: '–î–∞, –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–º–æ—â–∏ —Ä–æ–¥—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞–º'},
                            {value: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å', label: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å'}
                        ].map((opt, idx) => `
                            <div class="radio-option">
                                <input type="radio" id="transfersToThirdParties-${idx}" name="transfersToThirdParties" value="${opt.value}" ${anketaData.answers.step8_spending.transfersToThirdParties === opt.value ? 'checked' : ''} onchange="updateData('step8_spending', 'transfersToThirdParties', this.value); updateButtonState()">
                                <label for="transfersToThirdParties-${idx}">${opt.label}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-transfersToThirdParties">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>
            `;
        }

        function renderStep9() {
            return `
                <h1>–î–æ—Ö–æ–¥—ã</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –≤–∞—à–∏—Ö –¥–æ—Ö–æ–¥–∞—Ö. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ç–µ–∫—É—â–µ–≥–æ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤.</p>
                
                <div class="question-block">
                    <label class="question-label">–£–∫–∞–∂–∏—Ç–µ –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –≤–∞—à–µ–≥–æ –µ–∂–µ–º–µ—Å—è—á–Ω–æ–≥–æ –¥–æ—Ö–æ–¥–∞</label>
                    <input type="number" id="monthlyIncome" value="${anketaData.answers.step9_income.monthlyIncome !== null ? anketaData.answers.step9_income.monthlyIncome : ''}" oninput="updateData('step9_income', 'monthlyIncome', parseInt(this.value) || 0); updateButtonState()">
                    <span class="error-message" id="error-monthlyIncome">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ò–º–µ–µ—Ç—Å—è –ª–∏ —É –≤–∞—Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ —Ä–∞–±–æ—Ç—ã?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="hasOfficialJob-yes" name="hasOfficialJob" value="yes" ${anketaData.answers.step9_income.hasOfficialJob === true ? 'checked' : ''} onchange="updateData('step9_income', 'hasOfficialJob', true); updateButtonState()">
                            <label for="hasOfficialJob-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="hasOfficialJob-no" name="hasOfficialJob" value="no" ${anketaData.answers.step9_income.hasOfficialJob === false ? 'checked' : ''} onchange="updateData('step9_income', 'hasOfficialJob', false); updateButtonState()">
                            <label for="hasOfficialJob-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-hasOfficialJob">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ü–æ–ª—É—á–∞–µ—Ç–µ –ª–∏ –≤—ã –¥–æ—Ö–æ–¥ –æ—Ç —Å–∞–º–æ–∑–∞–Ω—è—Ç–æ—Å—Ç–∏ –∏–ª–∏ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–∞–º –æ–∫–∞–∑–∞–Ω–∏—è —É—Å–ª—É–≥ (–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ä–∞–±–æ—Ç)?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="hasSelfEmployment-yes" name="hasSelfEmployment" value="yes" ${anketaData.answers.step9_income.hasSelfEmployment === true ? 'checked' : ''} onchange="updateData('step9_income', 'hasSelfEmployment', true); updateButtonState()">
                            <label for="hasSelfEmployment-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="hasSelfEmployment-no" name="hasSelfEmployment" value="no" ${anketaData.answers.step9_income.hasSelfEmployment === false ? 'checked' : ''} onchange="updateData('step9_income', 'hasSelfEmployment', false); updateButtonState()">
                            <label for="hasSelfEmployment-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-hasSelfEmployment">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ò–º–µ—é—Ç—Å—è –ª–∏ —É –≤–∞—Å –∏–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–æ—Ö–æ–¥–∞?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="hasOtherIncome-yes" name="hasOtherIncome" value="yes" ${anketaData.answers.step9_income.hasOtherIncome === true ? 'checked' : ''} onchange="updateData('step9_income', 'hasOtherIncome', true); updateButtonState()">
                            <label for="hasOtherIncome-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="hasOtherIncome-no" name="hasOtherIncome" value="no" ${anketaData.answers.step9_income.hasOtherIncome === false ? 'checked' : ''} onchange="updateData('step9_income', 'hasOtherIncome', false); updateButtonState()">
                            <label for="hasOtherIncome-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-hasOtherIncome">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>
            `;
        }

        function renderStep10() {
            return `
                <h1>–†–∞—Å—Ö–æ–¥—ã –∏ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –≤–∞—à–∏—Ö —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–∞—Ö, –∞ —Ç–∞–∫–∂–µ –æ–± –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–∏ –∫—Ä–µ–¥–∏—Ç–Ω—ã—Ö –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ü–µ–Ω–∫–∏ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–≥–æ –ø–æ–ª–æ–∂–µ–Ω–∏—è –∏ –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–≤–µ–¥–µ–Ω–∏—è –∑–∞—ë–º—â–∏–∫–∞.</p>
                
                <h2>–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã</h2>
                
                <div class="question-block">
                    <label class="question-label">–ê–ª–∏–º–µ–Ω—Ç—ã (—Ä—É–±)</label>
                    <input type="number" id="alimony" value="${anketaData.answers.step10_expensesAndBehavior.alimony !== null ? anketaData.answers.step10_expensesAndBehavior.alimony : ''}" oninput="updateData('step10_expensesAndBehavior', 'alimony', parseInt(this.value) || 0); updateButtonState()">
                    <span class="error-message" id="error-alimony">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ö–æ–º–º—É–Ω–∞–ª—å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (—Ä—É–±)</label>
                    <input type="number" id="utilities" value="${anketaData.answers.step10_expensesAndBehavior.utilities !== null ? anketaData.answers.step10_expensesAndBehavior.utilities : ''}" oninput="updateData('step10_expensesAndBehavior', 'utilities', parseInt(this.value) || 0); updateButtonState()">
                    <span class="error-message" id="error-utilities">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ê—Ä–µ–Ω–¥–∞ –∂–∏–ª—å—è (—Ä—É–±)</label>
                    <input type="number" id="rent" value="${anketaData.answers.step10_expensesAndBehavior.rent !== null ? anketaData.answers.step10_expensesAndBehavior.rent : ''}" oninput="updateData('step10_expensesAndBehavior', 'rent', parseInt(this.value) || 0); updateButtonState()">
                    <span class="error-message" id="error-rent">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ò–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã (—Ä—É–±)</label>
                    <input type="number" id="otherExpenses" value="${anketaData.answers.step10_expensesAndBehavior.otherExpenses !== null ? anketaData.answers.step10_expensesAndBehavior.otherExpenses : ''}" oninput="updateData('step10_expensesAndBehavior', 'otherExpenses', parseInt(this.value) || 0); updateButtonState()">
                    <span class="error-message" id="error-otherExpenses">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <h2>–ü—Ä–æ—Å—Ä–æ—á–∫–∏ –∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º</h2>

                <div class="question-block">
                    <label class="question-label">–ò–º–µ—é—Ç—Å—è –ª–∏ —É –≤–∞—Å –ø—Ä–æ—Å—Ä–æ—á–∫–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–Ω—ã–º –æ–±—è–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞–º?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="hasOverdue-yes" name="hasOverdue" value="yes" ${anketaData.answers.step10_expensesAndBehavior.hasOverdue === true ? 'checked' : ''} onchange="updateData('step10_expensesAndBehavior', 'hasOverdue', true); renderCurrentStep()">
                            <label for="hasOverdue-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="hasOverdue-no" name="hasOverdue" value="no" ${anketaData.answers.step10_expensesAndBehavior.hasOverdue === false ? 'checked' : ''} onchange="updateData('step10_expensesAndBehavior', 'hasOverdue', false); clearConditionalFields('step10_expensesAndBehavior', ['maxOverduePeriod']); renderCurrentStep()">
                            <label for="hasOverdue-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-hasOverdue">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step10_expensesAndBehavior.hasOverdue === true ? `
                    <div class="question-block">
                        <label class="question-label">–ö–∞–∫–æ–≤ —Å—Ä–æ–∫ –Ω–∞–∏–±–æ–ª—å—à–µ–π –ø—Ä–æ—Å—Ä–æ—á–∫–∏ –ø–æ –∫—Ä–µ–¥–∏—Ç–∞–º?</label>
                        <select id="maxOverduePeriod" onchange="updateData('step10_expensesAndBehavior', 'maxOverduePeriod', this.value); updateButtonState()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                            <option value="–î–æ 30 –¥–Ω–µ–π" ${anketaData.answers.step10_expensesAndBehavior.maxOverduePeriod === '–î–æ 30 –¥–Ω–µ–π' ? 'selected' : ''}>–î–æ 30 –¥–Ω–µ–π</option>
                            <option value="–û—Ç 31 –¥–æ 90 –¥–Ω–µ–π" ${anketaData.answers.step10_expensesAndBehavior.maxOverduePeriod === '–û—Ç 31 –¥–æ 90 –¥–Ω–µ–π' ? 'selected' : ''}>–û—Ç 31 –¥–æ 90 –¥–Ω–µ–π</option>
                            <option value="–ë–æ–ª–µ–µ 90 –¥–Ω–µ–π" ${anketaData.answers.step10_expensesAndBehavior.maxOverduePeriod === '–ë–æ–ª–µ–µ 90 –¥–Ω–µ–π' ? 'selected' : ''}>–ë–æ–ª–µ–µ 90 –¥–Ω–µ–π</option>
                            <option value="–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å" ${anketaData.answers.step10_expensesAndBehavior.maxOverduePeriod === '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å' ? 'selected' : ''}>–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å</option>
                        </select>
                        <span class="error-message" id="error-maxOverduePeriod">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}

                <div class="question-block">
                    <label class="question-label">–û–±—Ä–∞—â–∞–ª–∏—Å—å –ª–∏ –≤—ã –≤ –∫—Ä–µ–¥–∏—Ç–Ω—ã–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å –∑–∞—è–≤–ª–µ–Ω–∏–µ–º –æ —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="requestedRestructuring-yes" name="requestedRestructuring" value="yes" ${anketaData.answers.step10_expensesAndBehavior.requestedRestructuring === true ? 'checked' : ''} onchange="updateData('step10_expensesAndBehavior', 'requestedRestructuring', true); renderCurrentStep()">
                            <label for="requestedRestructuring-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="requestedRestructuring-no" name="requestedRestructuring" value="no" ${anketaData.answers.step10_expensesAndBehavior.requestedRestructuring === false ? 'checked' : ''} onchange="updateData('step10_expensesAndBehavior', 'requestedRestructuring', false); clearConditionalFields('step10_expensesAndBehavior', ['restructuringWhen']); renderCurrentStep()">
                            <label for="requestedRestructuring-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-requestedRestructuring">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step10_expensesAndBehavior.requestedRestructuring === true ? `
                    <div class="question-block">
                        <label class="question-label">–ö–æ–≥–¥–∞ –≤—ã –æ–±—Ä–∞—â–∞–ª–∏—Å—å –∑–∞ —Ä–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏–µ–π?</label>
                        <select id="restructuringWhen" onchange="updateData('step10_expensesAndBehavior', 'restructuringWhen', this.value); updateButtonState()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                            <option value="–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.restructuringWhen === '–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                            <option value="–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.restructuringWhen === '–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                            <option value="–ë–æ–ª–µ–µ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.restructuringWhen === '–ë–æ–ª–µ–µ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–ë–æ–ª–µ–µ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                        </select>
                        <span class="error-message" id="error-restructuringWhen">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}

                <div class="question-block">
                    <label class="question-label">–ü–æ–ª—É—á–∞–ª–∏ –ª–∏ –≤—ã –Ω–æ–≤—ã–µ –∫—Ä–µ–¥–∏—Ç—ã –∏–ª–∏ –∑–∞–π–º—ã –ø–æ—Å–ª–µ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Ç—Ä—É–¥–Ω–æ—Å—Ç–µ–π?</label>
                    <div class="radio-group">
                        ${[
                            {value: '–î–∞', label: '–î–∞'},
                            {value: '–ù–µ—Ç', label: '–ù–µ—Ç'},
                            {value: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å', label: '–ó–∞—Ç—Ä—É–¥–Ω—è—é—Å—å –æ—Ç–≤–µ—Ç–∏—Ç—å'}
                        ].map((opt, idx) => `
                            <div class="radio-option">
                                <input type="radio" id="newCreditsAfterTrouble-${idx}" name="newCreditsAfterTrouble" value="${opt.value}" ${anketaData.answers.step10_expensesAndBehavior.newCreditsAfterTrouble === opt.value ? 'checked' : ''} onchange="updateData('step10_expensesAndBehavior', 'newCreditsAfterTrouble', this.value); clearConditionalFields('step10_expensesAndBehavior', ['newCreditsWhen']); renderCurrentStep()">
                                <label for="newCreditsAfterTrouble-${idx}">${opt.label}</label>
                            </div>
                        `).join('')}
                    </div>
                    <span class="error-message" id="error-newCreditsAfterTrouble">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                ${anketaData.answers.step10_expensesAndBehavior.newCreditsAfterTrouble === '–î–∞' ? `
                    <div class="question-block">
                        <label class="question-label">–°–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—à–ª–æ —Å –º–æ–º–µ–Ω—Ç–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤?</label>
                        <select id="newCreditsWhen" onchange="updateData('step10_expensesAndBehavior', 'newCreditsWhen', this.value); updateButtonState()">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ</option>
                            <option value="–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.newCreditsWhen === '–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–ú–µ–Ω–µ–µ 3 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                            <option value="–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.newCreditsWhen === '–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–û—Ç 3 –¥–æ 6 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                            <option value="–û—Ç 6 –¥–æ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.newCreditsWhen === '–û—Ç 6 –¥–æ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–û—Ç 6 –¥–æ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                            <option value="–ë–æ–ª–µ–µ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥" ${anketaData.answers.step10_expensesAndBehavior.newCreditsWhen === '–ë–æ–ª–µ–µ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥' ? 'selected' : ''}>–ë–æ–ª–µ–µ 12 –º–µ—Å—è—Ü–µ–≤ –Ω–∞–∑–∞–¥</option>
                        </select>
                        <span class="error-message" id="error-newCreditsWhen">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                ` : ''}
            `;
        }

        function renderStep11() {
            return `
                <h1>–ò–º—É—â–µ—Å—Ç–≤–æ</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—â–µ–º –≤–∞–º –∏–º—É—â–µ—Å—Ç–≤–µ. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å–æ—Å—Ç–∞–≤–∞ –∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –æ—Ü–µ–Ω–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π –ø—Ä–æ—Ü–µ–¥—É—Ä—ã –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–∞.</p>
                
                ${[
                    {id: 'onlyHome', label: '–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –∂–∏–ª—å—ë'},
                    {id: 'propertyShares', label: '–î–æ–ª–∏ –≤ –ø—Ä–∞–≤–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –Ω–∞ –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å'},
                    {id: 'mortgageContracts', label: '–î–µ–π—Å—Ç–≤—É—é—â–∏–µ –∏–ø–æ—Ç–µ—á–Ω—ã–µ –¥–æ–≥–æ–≤–æ—Ä—ã'},
                    {id: 'collateralProperty', label: '–ó–∞–ª–æ–≥–æ–≤–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ (–∫—Ä–æ–º–µ –∏–ø–æ—Ç–µ–∫–∏)'},
                    {id: 'financialAssets', label: '–í–∫–ª–∞–¥—ã/—Ü–µ–Ω–Ω—ã–µ –±—É–º–∞–≥–∏/—Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∞–∫—Ç–∏–≤—ã'},
                    {id: 'vehicles', label: '–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞'},
                    {id: 'otherProperty', label: '–ò–Ω–æ–µ –∏–º—É—â–µ—Å—Ç–≤–æ'}
                ].map(prop => `
                    <div class="question-block">
                        <label class="question-label">${prop.label}</label>
                        <div class="radio-group">
                            <div class="radio-option">
                                <input type="radio" id="${prop.id}-yes" name="${prop.id}" value="yes" ${anketaData.answers.step11_property[prop.id] === true ? 'checked' : ''} onchange="updateData('step11_property', '${prop.id}', true); updateButtonState()">
                                <label for="${prop.id}-yes">–î–∞</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="${prop.id}-no" name="${prop.id}" value="no" ${anketaData.answers.step11_property[prop.id] === false ? 'checked' : ''} onchange="updateData('step11_property', '${prop.id}', false); updateButtonState()">
                                <label for="${prop.id}-no">–ù–µ—Ç</label>
                            </div>
                        </div>
                        <span class="error-message" id="error-${prop.id}">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                    </div>
                `).join('')}
            `;
        }

        function renderStep12() {
            return `
                <h1>–ü—Ä–∞–≤–æ–≤—ã–µ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞</h1>
                <p class="step-description">–£–∫–∞–∂–∏—Ç–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø—Ä–∞–≤–æ–≤—ã—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∏–∏ –¥–µ–ª–∞ –æ –±–∞–Ω–∫—Ä–æ—Ç—Å—Ç–≤–µ. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π –ø—Ä–∞–≤–æ–≤–æ–π –æ—Ü–µ–Ω–∫–∏ —Å–∏—Ç—É–∞—Ü–∏–∏.</p>
                
                <div class="question-block">
                    <label class="question-label">–ò–º–µ–µ—Ç—Å—è –ª–∏ —Ä–µ—à–µ–Ω–∏–µ —Å—É–¥–∞ –æ –ø—Ä–∏–∑–Ω–∞–Ω–∏–∏ –≤–∞—Å –Ω–µ–¥–µ–µ—Å–ø–æ—Å–æ–±–Ω—ã–º –∏–ª–∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ –¥–µ–µ—Å–ø–æ—Å–æ–±–Ω—ã–º?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="incapacityDecision-yes" name="incapacityDecision" value="yes" ${anketaData.answers.step12_legal.incapacityDecision === true ? 'checked' : ''} onchange="updateData('step12_legal', 'incapacityDecision', true); updateButtonState()">
                            <label for="incapacityDecision-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="incapacityDecision-no" name="incapacityDecision" value="no" ${anketaData.answers.step12_legal.incapacityDecision === false ? 'checked' : ''} onchange="updateData('step12_legal', 'incapacityDecision', false); updateButtonState()">
                            <label for="incapacityDecision-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-incapacityDecision">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>

                <div class="question-block">
                    <label class="question-label">–ü—Ä–∏–≤–ª–µ–∫–∞–ª–∏—Å—å –ª–∏ –≤—ã –∫ —É–≥–æ–ª–æ–≤–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –ø–æ –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è–º –≤ —Å—Ñ–µ—Ä–µ –∫—Ä–µ–¥–∏—Ç–æ–≤–∞–Ω–∏—è –∏–ª–∏ –∏–º—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –ø—Ä–µ—Å—Ç—É–ø–ª–µ–Ω–∏—è–º?</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="criminalRecord-yes" name="criminalRecord" value="yes" ${anketaData.answers.step12_legal.criminalRecord === true ? 'checked' : ''} onchange="updateData('step12_legal', 'criminalRecord', true); updateButtonState()">
                            <label for="criminalRecord-yes">–î–∞</label>
                        </div>
                        <div class="radio-option">
                            <input type="radio" id="criminalRecord-no" name="criminalRecord" value="no" ${anketaData.answers.step12_legal.criminalRecord === false ? 'checked' : ''} onchange="updateData('step12_legal', 'criminalRecord', false); updateButtonState()">
                            <label for="criminalRecord-no">–ù–µ—Ç</label>
                        </div>
                    </div>
                    <span class="error-message" id="error-criminalRecord">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–µ</span>
                </div>
            `;
        }

        function renderFinalScreen() {
            return `
                <div class="final-screen">
                    <h1>–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∞</h1>
                    <p>–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∞–Ω–∫–µ—Ç—ã. –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –ø—Ä–∞–≤–æ–≤–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —Å—É–¥–µ–±–Ω–æ–π –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã.</p>
                </div>
            `;
        }

        function updateData(step, field, value) {
            anketaData.answers[step][field] = value;
        }

        function updateCheckbox(step, field, value, checked) {
            if (checked) {
                if (!anketaData.answers[step][field].includes(value)) {
                    anketaData.answers[step][field].push(value);
                }
            } else {
                anketaData.answers[step][field] = anketaData.answers[step][field].filter(v => v !== value);
            }
            updateButtonState();
        }

        function clearConditionalFields(step, fields) {
            fields.forEach(field => {
                const value = anketaData.answers[step][field];
                if (typeof value === 'string') {
                    anketaData.answers[step][field] = "";
                } else if (typeof value === 'number') {
                    anketaData.answers[step][field] = null;
                } else if (Array.isArray(value)) {
                    anketaData.answers[step][field] = [];
                } else {
                    anketaData.answers[step][field] = null;
                }
            });
        }

        function validateStep(step) {
            const errors = [];
            
            switch(step) {
                case 1:
                    if (!anketaData.answers.step1_general.region) errors.push('region');
                    if (!anketaData.answers.step1_general.fullName.trim()) errors.push('fullName');
                    if (anketaData.answers.step1_general.wasBankrupt === null) errors.push('wasBankrupt');
                    if (anketaData.answers.step1_general.wasBankrupt === true) {
                        if (!anketaData.answers.step1_general.bankruptYear) errors.push('bankruptYear');
                        if (!anketaData.answers.step1_general.bankruptType) errors.push('bankruptType');
                    }
                    break;
                    
                case 2:
                    if (anketaData.answers.step2_family.isMarried === null) errors.push('isMarried');
                    if (anketaData.answers.step2_family.isMarried === false && anketaData.answers.step2_family.wasMarriedLast3Years === null) {
                        errors.push('wasMarriedLast3Years');
                    }
                    
                    const showMarriageQuestions = anketaData.answers.step2_family.isMarried === true || 
                        (anketaData.answers.step2_family.isMarried === false && anketaData.answers.step2_family.wasMarriedLast3Years === true);
                    
                    if (showMarriageQuestions) {
                        if (anketaData.answers.step2_family.spouseTransactions === null) errors.push('spouseTransactions');
                        if (anketaData.answers.step2_family.spouseTransactions === true && anketaData.answers.step2_family.spouseTransactionTypes.length === 0) {
                            errors.push('spouseTransactionTypes');
                        }
                        if (anketaData.answers.step2_family.spouseProperty.length === 0) errors.push('spouseProperty');
                    }
                    break;
                    
                case 3:
                    if (!anketaData.answers.step3_children.childrenCount) errors.push('childrenCount');
                    if (anketaData.answers.step3_children.childrenCount && anketaData.answers.step3_children.childrenCount !== '–î–µ—Ç–µ–π –Ω–µ—Ç') {
                        if (anketaData.answers.step3_children.monthlyExpenses === null) errors.push('monthlyExpenses');
                    }
                    break;
                    
                case 4:
                    if (anketaData.answers.step4_debts.totalDebt === null) errors.push('totalDebt');
                    if (!anketaData.answers.step4_debts.nonDischargeable) errors.push('nonDischargeable');
                    break;
                    
                case 5:
                    if (anketaData.answers.step5_banks.selectedBanks.length === 0) errors.push('selectedBanks');
                    if (anketaData.answers.step5_banks.selectedBanks.includes('–î—Ä—É–≥–æ–π –±–∞–Ω–∫') && !anketaData.answers.step5_banks.otherBankName.trim()) {
                        errors.push('otherBankName');
                    }
                    break;
                    
                case 6:
                    anketaData.answers.step5_banks.selectedBanks.forEach(bank => {
                        const bankData = anketaData.answers.step6_bankCredits[bank];
                        if (!bankData || !bankData.count) {
                            errors.push(`bankCount-${bank}`);
                        } else {
                            for (let i = 0; i < bankData.count; i++) {
                                const credit = bankData.credits[i];
                                if (!credit || credit.amount === null) errors.push(`credit-${bank}-${i}-amount`);
                                if (!credit || credit.monthsAgo === null) errors.push(`credit-${bank}-${i}-monthsAgo`);
                                if (!credit || credit.paymentsCount === null) errors.push(`credit-${bank}-${i}-paymentsCount`);
                            }
                        }
                    });
                    break;
                    
                case 7:
                    if (anketaData.answers.step7_mfo.mfoCount === null) errors.push('mfoCount');
                    if (anketaData.answers.step7_mfo.mfoCount > 0 && anketaData.answers.step7_mfo.mfoTotalDebt === null) {
                        errors.push('mfoTotalDebt');
                    }
                    break;
                    
                case 8:
                    if (anketaData.answers.step8_spending.purposes.length === 0) errors.push('purposes');
                    if (anketaData.answers.step8_spending.purposes.includes('–ò–Ω—ã–µ —Ü–µ–ª–∏') && !anketaData.answers.step8_spending.otherPurpose.trim()) {
                        errors.push('otherPurpose');
                    }
                    if (!anketaData.answers.step8_spending.largePurchases) errors.push('largePurchases');
                    if (!anketaData.answers.step8_spending.propertyPurchased) errors.push('propertyPurchased');
                    if (anketaData.answers.step8_spending.propertyPurchased && anketaData.answers.step8_spending.propertyPurchased.startsWith('–î–∞') && !anketaData.answers.step8_spending.propertyType) {
                        errors.push('propertyType');
                    }
                    if (!anketaData.answers.step8_spending.transfersToThirdParties) errors.push('transfersToThirdParties');
                    break;
                    
                case 9:
                    if (anketaData.answers.step9_income.monthlyIncome === null) errors.push('monthlyIncome');
                    if (anketaData.answers.step9_income.hasOfficialJob === null) errors.push('hasOfficialJob');
                    if (anketaData.answers.step9_income.hasSelfEmployment === null) errors.push('hasSelfEmployment');
                    if (anketaData.answers.step9_income.hasOtherIncome === null) errors.push('hasOtherIncome');
                    break;
                    
                case 10:
                    if (anketaData.answers.step10_expensesAndBehavior.alimony === null) errors.push('alimony');
                    if (anketaData.answers.step10_expensesAndBehavior.utilities === null) errors.push('utilities');
                    if (anketaData.answers.step10_expensesAndBehavior.rent === null) errors.push('rent');
                    if (anketaData.answers.step10_expensesAndBehavior.otherExpenses === null) errors.push('otherExpenses');
                    if (anketaData.answers.step10_expensesAndBehavior.hasOverdue === null) errors.push('hasOverdue');
                    if (anketaData.answers.step10_expensesAndBehavior.hasOverdue === true && !anketaData.answers.step10_expensesAndBehavior.maxOverduePeriod) {
                        errors.push('maxOverduePeriod');
                    }
                    if (anketaData.answers.step10_expensesAndBehavior.requestedRestructuring === null) errors.push('requestedRestructuring');
                    if (anketaData.answers.step10_expensesAndBehavior.requestedRestructuring === true && !anketaData.answers.step10_expensesAndBehavior.restructuringWhen) {
                        errors.push('restructuringWhen');
                    }
                    if (!anketaData.answers.step10_expensesAndBehavior.newCreditsAfterTrouble) errors.push('newCreditsAfterTrouble');
                    if (anketaData.answers.step10_expensesAndBehavior.newCreditsAfterTrouble === '–î–∞' && !anketaData.answers.step10_expensesAndBehavior.newCreditsWhen) {
                        errors.push('newCreditsWhen');
                    }
                    break;
                    
                case 11:
                    ['onlyHome', 'propertyShares', 'mortgageContracts', 'collateralProperty', 'financialAssets', 'vehicles', 'otherProperty'].forEach(prop => {
                        if (anketaData.answers.step11_property[prop] === null) errors.push(prop);
                    });
                    break;
                    
                case 12:
                    if (anketaData.answers.step12_legal.incapacityDecision === null) errors.push('incapacityDecision');
                    if (anketaData.answers.step12_legal.criminalRecord === null) errors.push('criminalRecord');
                    break;
            }
            
            return errors;
        }

        function showErrors(errors) {
            document.querySelectorAll('.error-message').forEach(el => el.classList.remove('show'));
            
            errors.forEach(errorId => {
                const errorEl = document.getElementById(`error-${errorId}`);
                if (errorEl) {
                    errorEl.classList.add('show');
                }
            });
        }

        function renderCurrentStep() {
            const app = document.getElementById('app');
            let content = '';
            
            if (currentStep === 13) {
                content = renderFinalScreen();
            } else {
                const stepFunctions = [
                    null, renderStep1, renderStep2, renderStep3, renderStep4, renderStep5,
                    renderStep6, renderStep7, renderStep8, renderStep9, renderStep10,
                    renderStep11, renderStep12
                ];
                
                content = `
                    <div class="step active">
                        ${stepFunctions[currentStep]()}
                        <div class="navigation">
                            ${currentStep > 1 ? '<button class="btn-back" onclick="goBack()">–ù–∞–∑–∞–¥</button>' : '<div></div>'}
                            ${currentStep < 12 ? 
                                '<button class="btn-next" id="btnNext" onclick="goNext()">–î–∞–ª–µ–µ</button>' :
                                '<button class="btn-finish" id="btnNext" onclick="finishAnketa()">–ó–∞–≤–µ—Ä—à–∏—Ç—å –∞–Ω–∫–µ—Ç—É</button>'
                            }
                        </div>
                    </div>
                `;
            }
            
            app.innerHTML = content;
            
            if (currentStep <= 12) {
                updateButtonState();
            }
        }

        function updateButtonState() {
            const errors = validateStep(currentStep);
            const btnNext = document.getElementById('btnNext');
            if (btnNext) {
                btnNext.disabled = errors.length > 0;
            }
        }

        function goBack() {
            if (currentStep > 1) {
                currentStep--;
                renderCurrentStep();
            }
        }

        function goNext() {
            const errors = validateStep(currentStep);
            
            if (errors.length > 0) {
                showErrors(errors);
                return;
            }
            
            if (currentStep < 12) {
                currentStep++;
                renderCurrentStep();
            }
        }

        async function finishAnketa() {
            const errors = validateStep(currentStep);
            
            if (errors.length > 0) {
                showErrors(errors);
                return;
            }
            
            anketaData.meta.completed_at = new Date().toISOString();
            
            const result = getAnketaResult();
            
            const btnFinish = document.getElementById('btnNext');
            if (btnFinish) {
                btnFinish.textContent = '–û—Ç–ø—Ä–∞–≤–∫–∞...';
                btnFinish.disabled = true;
            }
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–π–º–∞—É—Ç–æ–º 6 —Å–µ–∫—É–Ω–¥
            const controller = new AbortController();
            const timeoutId = setTimeout(() => controller.abort(), 6000);
            
            try {
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(result),
                    signal: controller.signal
                });
                
                clearTimeout(timeoutId);
                const data = await response.json();
                
                if (data.success) {
                    console.log('‚úÖ –ó–∞—è–≤–∫–∞ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞:', data);
                } else {
                    console.error('‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏:', data.error);
                }
            } catch (error) {
                clearTimeout(timeoutId);
                if (error.name === 'AbortError') {
                    console.log('‚è±Ô∏è –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ');
                } else {
                    console.error('‚ùå –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º:', error);
                }
            }
            
            // –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—à–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
            currentStep = 13;
            renderCurrentStep();
            
            console.log('–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∫–µ—Ç—ã:', JSON.stringify(result, null, 2));
        }

        document.addEventListener('DOMContentLoaded', () => {
            renderCurrentStep();
        });
    </script>
</body>
</html>
